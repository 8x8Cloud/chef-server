Configuring logging...
Creating platform...
Configured URL: https://api.chef-server.dev
Creating org pedant_testorg_api_28733
Validating Org Creation
Run options: include {:focus=>true, :license=>true}

All examples were filtered out; ignoring {:focus=>true, :license=>true}

Randomized with seed 55016

.................................

Finished in 1.3 seconds
33 examples, 0 failures

Randomized with seed 55016

Starting Pedant Run: 2015-05-15 19:51:00 UTC
 _______  _______  _______  _______  _______  ______   _______
|       ||       ||       ||       ||       ||      | |       |
|   _   ||    _  ||  _____||       ||   _   ||  _    ||    ___|
|  | |  ||   |_| || |_____ |       ||  | |  || | |   ||   |___
|  |_|  ||    ___||_____  ||      _||  |_|  || |_|   ||    ___|
|       ||   |     _____| ||     |_ |       ||       ||   |___
|_______||___|    |_______||_______||_______||______| |_______|

     _______  _______  ______   _______  __    _  _______
    |       ||       ||      | |   _   ||  |  | ||       |
    |    _  ||    ___||  _    ||  |_|  ||   |_| ||_     _|
    |   |_| ||   |___ | | |   ||       ||       |  |   |
    |    ___||    ___|| |_|   ||       ||  _    |  |   |
    |   |    |   |___ |       ||   _   || | |   |  |   |
    |___|    |_______||______| |__| |__||_|  |__|  |___|

                    "Accuracy Over Tact"

                  === Testing Environment ===
                 Config File: /var/opt/opscode/oc-chef-pedant/etc/pedant_config.rb
       HTTP Traffic Log File: /var/log/opscode/oc-chef-pedant/http-traffic.log

Running tests from the following directories:
/host/oc-chef-pedant/spec/api
Run options:
  include {:focus=>true, :license=>true}
  exclude {:intermittent_failure=>true, :cleanup=>true}

Randomized with seed 38121


license
  GET /license
    with no nodes
[31m      returns 200 and correct body for superuser (FAILED - 1)[0m
[31m      returns 200 and correct body for admin user (FAILED - 2)[0m
[31m      returns 200 and correct body for normal user (FAILED - 3)[0m
[32m      returns 401 for invalid user[0m
[32m      returns 401 for client[0m
    with nodes
      with one node
[31m        should return correct body for license status (FAILED - 4)[0m
      with 25 nodes (license not exceeded)
[31m        should return correct body for license status (FAILED - 5)[0m
      with  26 (license exceeded)
[31m        should return correct body for license status (FAILED - 6)[0m
Deleting organization pedant_testorg_api_28733 ...

Failures:

  1) license GET /license with no nodes returns 200 and correct body for superuser
     [31mFailure/Error:[0m [31mget(request_url, superuser).should look_like([0m
       [31m[0m
       [31mExpected a full match of the result[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>1,[0m
       [31m "upgrade_url"=>"http://www.getchef.com/contact/on-premises-simple"}[0m
       [31m[0m
       [31m[0m
       [31mto the spec[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>0,[0m
       [31m "upgrade_url"=>/^http\:\/\.*/}[0m
       [31m[0m
       [31m[0m
       [31mto succeed, but it didn't![0m
[36m     # ./spec/api/license_spec.rb:30:in `block (4 levels) in <top (required)>'[0m

  2) license GET /license with no nodes returns 200 and correct body for admin user
     [31mFailure/Error:[0m [31mget(request_url, platform.admin_user).should look_like([0m
       [31m[0m
       [31mExpected a full match of the result[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>1,[0m
       [31m "upgrade_url"=>"http://www.getchef.com/contact/on-premises-simple"}[0m
       [31m[0m
       [31m[0m
       [31mto the spec[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>0,[0m
       [31m "upgrade_url"=>/^http\:\/\.*/}[0m
       [31m[0m
       [31m[0m
       [31mto succeed, but it didn't![0m
[36m     # ./spec/api/license_spec.rb:37:in `block (4 levels) in <top (required)>'[0m

  3) license GET /license with no nodes returns 200 and correct body for normal user
     [31mFailure/Error:[0m [31mget(request_url, platform.non_admin_user).should look_like([0m
       [31m[0m
       [31mExpected a full match of the result[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>1,[0m
       [31m "upgrade_url"=>"http://www.getchef.com/contact/on-premises-simple"}[0m
       [31m[0m
       [31m[0m
       [31mto the spec[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>0,[0m
       [31m "upgrade_url"=>/^http\:\/\.*/}[0m
       [31m[0m
       [31m[0m
       [31mto succeed, but it didn't![0m
[36m     # ./spec/api/license_spec.rb:44:in `block (4 levels) in <top (required)>'[0m

  4) license GET /license with nodes with one node should return correct body for license status
     [31mFailure/Error:[0m [31mget(request_url, superuser).should look_like([0m
       [31m[0m
       [31mExpected a full match of the result[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>2,[0m
       [31m "upgrade_url"=>"http://www.getchef.com/contact/on-premises-simple"}[0m
       [31m[0m
       [31m[0m
       [31mto the spec[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>1,[0m
       [31m "upgrade_url"=>/^http\:\/\.*/}[0m
       [31m[0m
       [31m[0m
       [31mto succeed, but it didn't![0m
[36m     # ./spec/api/license_spec.rb:85:in `block (5 levels) in <top (required)>'[0m

  5) license GET /license with nodes with 25 nodes (license not exceeded) should return correct body for license status
     [31mFailure/Error:[0m [31mget(request_url, superuser).should look_like([0m
       [31m[0m
       [31mExpected a full match of the result[0m
       [31m[0m
       [31m  {"limit_exceeded"=>true,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>26,[0m
       [31m "upgrade_url"=>"http://www.getchef.com/contact/on-premises-simple"}[0m
       [31m[0m
       [31m[0m
       [31mto the spec[0m
       [31m[0m
       [31m  {"limit_exceeded"=>false,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>25,[0m
       [31m "upgrade_url"=>/^http\:\/\.*/}[0m
       [31m[0m
       [31m[0m
       [31mto succeed, but it didn't![0m
[36m     # ./spec/api/license_spec.rb:96:in `block (5 levels) in <top (required)>'[0m

  6) license GET /license with nodes with  26 (license exceeded) should return correct body for license status
     [31mFailure/Error:[0m [31mget(request_url, superuser).should look_like([0m
       [31m[0m
       [31mExpected a full match of the result[0m
       [31m[0m
       [31m  {"limit_exceeded"=>true,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>27,[0m
       [31m "upgrade_url"=>"http://www.getchef.com/contact/on-premises-simple"}[0m
       [31m[0m
       [31m[0m
       [31mto the spec[0m
       [31m[0m
       [31m  {"limit_exceeded"=>true,[0m
       [31m "node_license"=>25,[0m
       [31m "node_count"=>26,[0m
       [31m "upgrade_url"=>/^http\:\/\.*/}[0m
       [31m[0m
       [31m[0m
       [31mto succeed, but it didn't![0m
[36m     # ./spec/api/license_spec.rb:106:in `block (5 levels) in <top (required)>'[0m

Finished in 13.65 seconds
[31m8 examples, 6 failures[0m

Failed examples:

[31mrspec ./spec/api/license_spec.rb:29[0m [36m# license GET /license with no nodes returns 200 and correct body for superuser[0m
[31mrspec ./spec/api/license_spec.rb:36[0m [36m# license GET /license with no nodes returns 200 and correct body for admin user[0m
[31mrspec ./spec/api/license_spec.rb:43[0m [36m# license GET /license with no nodes returns 200 and correct body for normal user[0m
[31mrspec ./spec/api/license_spec.rb:84[0m [36m# license GET /license with nodes with one node should return correct body for license status[0m
[31mrspec ./spec/api/license_spec.rb:95[0m [36m# license GET /license with nodes with 25 nodes (license not exceeded) should return correct body for license status[0m
[31mrspec ./spec/api/license_spec.rb:105[0m [36m# license GET /license with nodes with  26 (license exceeded) should return correct body for license status[0m

Randomized with seed 38121

